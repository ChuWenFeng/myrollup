# myrollup DOC
## Client
![myrollup](image/client_web.png)
## server
rollup server æ€»ä½“æ¶æ„
![rollup](image/rollup_server.png)  
rollupçš„serveråˆ†ä¸º6ä¸ªéƒ¨åˆ†  
1. main  
    ç¨‹åºçš„å…¥å£ï¼Œè´Ÿè´£å¯åŠ¨api_serverã€eth_wathcã€state_keeperã€committerã€eth_senderã€‚åŒæ—¶å¼€å¯ä¸€ä¸ªå®šæ—¶å™¨æ¯100mså‘state_keeperå‘é€ä¸€ä¸ªtransferå‡ºå—è¯·æ±‚ï¼Œstate_keeperåœ¨æ»¡è¶³ä¸€å®šæ¡ä»¶åå°†ä¼šå‡ºå—ã€‚
2. api_server  
    å¤„ç†webç«¯çš„è¯·æ±‚ï¼Œæ¥æ”¶äº¤æ˜“è¯·æ±‚ï¼Œå¯¹äº¤æ˜“çš„äº¤æ˜“å†…å®¹å’Œç­¾åè¿›è¡ŒéªŒè¯ï¼Œè‹¥é€šè¿‡æ£€éªŒåˆ™å‘é€ç»™state_keeperã€‚å¤„ç†webç«¯çš„è´¦æˆ·çŠ¶æ€æŸ¥è¯¢è¯·æ±‚ï¼Œè¿”å›å½“å‰è´¦æˆ·å·²ç»æäº¤çš„å’Œé€šè¿‡éªŒè¯çš„å­˜æ¬¾ã€è½¬è´¦ã€é€€å‡ºäº¤æ˜“ã€‚
3. eth_watch
    ç›‘æ§ethä¸Šrollupè´Ÿè´£å­˜æ¬¾å’Œé€€å‡ºçš„æ™ºèƒ½åˆçº¦ï¼Œå°†è·å¾—çš„ä¿¡æ¯å‘é€ç»™state_keeperã€‚
4. state_keeper
    ç»´æŠ¤rollupçš„è´¦æˆ·çŠ¶æ€æ ‘ï¼Œå¯åŠ¨æ—¶ä»æ•°æ®åº“æ¢å¤çŠ¶æ€æ ‘ï¼Œå¤„ç†å­˜æ¬¾ã€äº¤æ˜“ã€é€€å‡ºè¯·æ±‚ã€‚æ¯ä¸ªå­˜æ¬¾å’Œé€€å‡ºè¯·æ±‚éƒ½å°†å‡ºå—ï¼Œæ¯60ç§’æˆ–8ç¬”äº¤æ˜“éƒ½å°†å‡ºå—ï¼Œå½“60ç§’ä½†äº¤æ˜“ä¸è¶³8ç¬”æ—¶å°†è¿›è¡Œå¡«å……ã€‚
5. committer  
    å¤„ç†state_keeperçš„å‡ºå—ä¿¡æ¯ï¼Œå°†å…¶ä¸­çš„è´¦æˆ·æ›´æ”¹æäº¤åˆ°account_updateè¡¨ä¸­ï¼Œè¡¨ç¤ºä¸€æäº¤ä½†æœªç”Ÿæˆè¯æ˜çš„è´¦æˆ·ä¿¡æ¯ã€‚è¯»å–æ•°æ®åº“ä¸­å·²ç»ç”Ÿæˆçš„proof,å¹¶å°†å·²ç»ç”Ÿå­˜proofçš„å—å†…çš„æ•°æ®æ›´æ–°åˆ°accountè¡¨ä¸­ã€‚å°†è´¦æˆ·æ›´æ–°ä¿¡æ¯å’Œproofä¿¡æ¯å‘é€ç»™eth_senderã€‚
6. eth_sender  
    è°ƒç”¨ethæ™ºèƒ½åˆçº¦ã€‚  
*[detail](image/rollup_server_detail.png)*
---------------------------------------------------------------
myrollup server æ€»ä½“æ¶æ„
![myrollup](image/myrollup_server.png)  
myrollupçš„serveråˆ†ä¸º4éƒ¨åˆ†ï¼ˆå»é™¤ethç›¸å…³ï¼‰  
1. main  
    ç¨‹åºå…¥å£,å¯åŠ¨api_server,state_keeper,committerã€‚...
2. api_server  
    å¤„ç†webç«¯çš„è¯·æ±‚ã€‚å»é™¤ethç›¸å…³ä»£ç ååŒæ—¶å¤„ç†å­˜æ¬¾å’Œé€€å‡ºè¯·æ±‚ã€‚
3. state_keeper  
    ...
4. committer  
    ...  
*[detail](image/myrollup_server_detail.png)*

## prover
å¯åŠ¨proveråå¾ªç¯æŸ¥è¯¢æ•°æ®åº“æ˜¯å¦æœ‰å·²ç»å‡ºå—ä½†æœªè¢«å…¶ä»–proveræ‰§è¡Œè¯æ˜çš„blockï¼Œä¸”åœ¨æŸ¥è¯¢æœŸé—´å°†prover_runsä¸ŠğŸ”“ï¼Œä¿è¯å¯¹ä¸€ä¸ªblockåªæœ‰ä¸€ä¸ªproveråœ¨ç”Ÿæˆproofã€‚å½“ä»æ•°æ®åº“ä¸­çš„è·å¾—çš„block numberä¸æœ¬åœ°çš„ä¸ä¸€è‡´æ—¶å°†è‡ªèº«çš„çŠ¶æ€æ ‘æ›´æ–°è‡³block numberå‰ä¸€ä¸ªå·²ç»ç”Ÿæˆè¯æ˜çš„è´¦æˆ·çŠ¶æ€ã€‚ç”Ÿæˆçš„proofå­˜å‚¨è‡³æ•°æ®åº“ã€‚
## æ•°æ®åº“
|è¡¨å|ä½œç”¨|
|:----|:----|
|accounts_updates|å­˜å‚¨ä»¥åŠæäº¤å¹¶æ›´æ”¹çš„è´¦æˆ·çŠ¶æ€|
|accounts|å­˜å‚¨å·²ç»ç”Ÿæˆè¯æ˜çš„è´¦æˆ·çŠ¶æ€|
|active_provers|å­˜å‚¨ç”Ÿæˆè¯æ˜çš„proverå,å¯åŠ¨æ—¶é—´å’Œåœæ­¢æ—¶é—´|
|op_coffig|æœªç”¨|
|operations|å­˜å‚¨æäº¤å’ŒéªŒè¯æ“ä½œçš„æ•°æ®ï¼Œæ—¶é—´|
|proofs|å­˜å‚¨æ¯ä¸ªç”Ÿæˆçš„blockçš„è¯æ˜|
|prover_runs|è®°å½•æ¯ä¸ªblockçš„è¯æ˜çš„ç”Ÿæˆè€…|
|server_config|å­˜å‚¨æ™ºèƒ½åˆçº¦åœ°å€|
|transactions|å­˜å‚¨æ¯ä¸ªå­˜æ¬¾ã€äº¤æ˜“ã€é€€å‡ºçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»å‹ã€fromã€toã€æ•°é¢ã€çŠ¶æ€æ ‘æ ¹hashã€æ—¶é—´ç­‰|
